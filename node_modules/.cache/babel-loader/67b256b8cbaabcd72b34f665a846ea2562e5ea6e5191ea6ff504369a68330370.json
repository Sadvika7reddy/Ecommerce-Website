{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Unitech\\\\Downloads\\\\01-starting-setup (1)\\\\01-starting-setup\\\\src\\\\components\\\\store\\\\CreateProvider.js\",\n  _s = $RefreshSig$();\nimport CartContext from './CartContext';\nimport { useState, useReducer, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateProvider = props => {\n  _s();\n  const [items, updateItems] = useState([]);\n  const email = localStorage.getItem(\"email\");\n  let crudEmail;\n  if (email != null) {\n    crudEmail = email.replace(/[@.]/g, \"\");\n  }\n  useEffect(() => {\n    axios.get(`https://crudcrud.com/api/84c7149604d149c7a8c8cecc0a03c1ce/cart${crudEmail}`).then(res => {\n      let cartItems = [];\n      for (let i = 0; i < res.data.length; i++) {\n        let item = res.data[i];\n        cartItems.push(item);\n      }\n      updateItems(cartItems);\n    }).catch(err => console.log(err));\n  }, [crudEmail]);\n  const addItemToCartHandler = item => {\n    const existingItems = [...items];\n    const itemIdx = existingItems.findIndex(i => i.title === item.title);\n    if (itemIdx !== -1) {\n      console.log(existingItems[itemIdx]);\n      const cartObj = {\n        price: existingItems[itemIdx].price,\n        title: existingItems[itemIdx].title,\n        quantity: Number(existingItems[itemIdx].quantity) + 1,\n        imageUrl: existingItems[itemIdx].imageUrl\n      };\n      axios.put(`https://crudcrud.com/api/84c7149604d149c7a8c8cecc0a03c1ce/cart${crudEmail}/${existingItems[itemIdx]._id}`, cartObj).then(() => {\n        let newCartItems = [...items];\n        // newCartItems[itemIdx].quantity = cartObj.quantity;\n        newCartItems[itemIdx].quantity++;\n        updateItems(newCartItems);\n      });\n    } else {\n      axios.post(`https://crudcrud.com/api/84c7149604d149c7a8c8cecc0a03c1ce/cart${crudEmail}`, item).then(response => {\n        updateItems([...items, response.data]);\n      }).catch(err => console.log(err));\n    }\n  };\n  const removeItemFromCartHandler = item => {\n    const existingItems = [...items];\n    const itemIdx = existingItems.findIndex(i => i.title === item.title);\n    if (item.quantity > 1) {\n      const cartObj = {\n        price: item.price,\n        title: item.title,\n        quantity: Number(item.quantity) - 1,\n        imageUrl: item.imageUrl\n      };\n      axios.put(`https://crudcrud.com/api/85da8fb90d454c97ad510aa5a880fe3a/cart${crudEmail}/${existingItems[itemIdx]._id}`, cartObj).then(() => {\n        let newCartItems = [...items];\n        newCartItems[itemIdx].quantity = cartObj.quantity;\n        updateItems(newCartItems);\n      });\n    } else if (item.quantity === 1) {\n      axios.delete(`https://crudcrud.com/api/84c7149604d149c7a8c8cecc0a03c1ce/cart${crudEmail}/${item._id}`).then(response => {\n        const existingItems = [...items];\n        const itemIdx = existingItems.findIndex(i => i._id === item._id);\n        existingItems.splice(itemIdx, 1);\n        updateItems(existingItems);\n      }).catch(err => console.log(err));\n    }\n  };\n  function updateItemsHandler(items) {\n    updateItems(items); //setItems\n  }\n\n  const cartContext = {\n    items: items,\n    addItem: addItemToCartHandler,\n    removeItem: removeItemFromCartHandler,\n    update: updateItemsHandler\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: cartContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 7\n  }, this);\n};\n_s(CreateProvider, \"s+wOYsPN+R+qxQjcfiYBgJRYxPM=\");\n_c = CreateProvider;\nexport default CreateProvider;\nvar _c;\n$RefreshReg$(_c, \"CreateProvider\");","map":{"version":3,"names":["CartContext","useState","useReducer","useEffect","axios","CreateProvider","props","items","updateItems","email","localStorage","getItem","crudEmail","replace","get","then","res","cartItems","i","data","length","item","push","catch","err","console","log","addItemToCartHandler","existingItems","itemIdx","findIndex","title","cartObj","price","quantity","Number","imageUrl","put","_id","newCartItems","post","response","removeItemFromCartHandler","delete","splice","updateItemsHandler","cartContext","addItem","removeItem","update","children"],"sources":["C:/Users/Unitech/Downloads/01-starting-setup (1)/01-starting-setup/src/components/store/CreateProvider.js"],"sourcesContent":["import CartContext from './CartContext';\r\nimport {useState,useReducer,useEffect} from 'react'\r\nimport axios from 'axios';\r\nconst CreateProvider = (props) => {\r\n    const [items, updateItems] = useState([]);\r\n    const email = localStorage.getItem(\"email\");\r\n    let crudEmail;\r\n    if (email != null) {\r\n      crudEmail = email.replace(/[@.]/g, \"\");\r\n    }\r\n  \r\n    useEffect(() => {\r\n      axios\r\n        .get(\r\n          `https://crudcrud.com/api/84c7149604d149c7a8c8cecc0a03c1ce/cart${crudEmail}`\r\n        )\r\n        .then((res) => {\r\n          let cartItems = [];\r\n          for (let i = 0; i < res.data.length; i++) {\r\n            let item = res.data[i];\r\n            cartItems.push(item);\r\n          }\r\n          updateItems(cartItems);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }, [crudEmail]);\r\n  \r\n    const addItemToCartHandler = (item) => {\r\n      const existingItems = [...items];\r\n      const itemIdx = existingItems.findIndex((i) => i.title === item.title);\r\n      if (itemIdx !== -1) {\r\n        console.log(existingItems[itemIdx]);\r\n        const cartObj = {\r\n          price: existingItems[itemIdx].price,\r\n          title: existingItems[itemIdx].title,\r\n          quantity: Number(existingItems[itemIdx].quantity) + 1,\r\n          imageUrl: existingItems[itemIdx].imageUrl,\r\n        };\r\n        axios\r\n          .put(\r\n            `https://crudcrud.com/api/84c7149604d149c7a8c8cecc0a03c1ce/cart${crudEmail}/${existingItems[itemIdx]._id}`,\r\n            cartObj\r\n          )\r\n          .then(() => {\r\n            let newCartItems = [...items];\r\n            // newCartItems[itemIdx].quantity = cartObj.quantity;\r\n            newCartItems[itemIdx].quantity++;\r\n            updateItems(newCartItems);\r\n          });\r\n      } else {\r\n        axios\r\n          .post(\r\n            `https://crudcrud.com/api/84c7149604d149c7a8c8cecc0a03c1ce/cart${crudEmail}`,\r\n            item\r\n          )\r\n          .then((response) => {\r\n            updateItems([...items, response.data]);\r\n          })\r\n          .catch((err) => console.log(err));\r\n      }\r\n    };\r\n    const removeItemFromCartHandler = (item) => {\r\n      const existingItems = [...items];\r\n      const itemIdx = existingItems.findIndex((i) => i.title === item.title);\r\n      if (item.quantity > 1) {\r\n        const cartObj = {\r\n          price: item.price,\r\n          title: item.title,\r\n          quantity: Number(item.quantity) - 1,\r\n          imageUrl: item.imageUrl,\r\n        };\r\n        axios\r\n          .put(\r\n            `https://crudcrud.com/api/85da8fb90d454c97ad510aa5a880fe3a/cart${crudEmail}/${existingItems[itemIdx]._id}`,\r\n            cartObj\r\n          )\r\n          .then(() => {\r\n            let newCartItems = [...items];\r\n            newCartItems[itemIdx].quantity = cartObj.quantity;\r\n            updateItems(newCartItems);\r\n          });\r\n      } else if (item.quantity === 1) {\r\n        axios\r\n          .delete(\r\n            `https://crudcrud.com/api/84c7149604d149c7a8c8cecc0a03c1ce/cart${crudEmail}/${item._id}`\r\n          )\r\n          .then((response) => {\r\n            const existingItems = [...items];\r\n            const itemIdx = existingItems.findIndex((i) => i._id === item._id);\r\n            existingItems.splice(itemIdx, 1);\r\n            updateItems(existingItems);\r\n          })\r\n  \r\n          .catch((err) => console.log(err));\r\n      }\r\n    };\r\n    function updateItemsHandler(items) {\r\n      updateItems(items); //setItems\r\n    }\r\n  \r\n    const cartContext = {\r\n      items: items,\r\n      addItem: addItemToCartHandler,\r\n      removeItem: removeItemFromCartHandler,\r\n      update: updateItemsHandler,\r\n    };\r\n    return (\r\n      <CartContext.Provider value={cartContext}>\r\n        {/* {console.log(cartContext)} */}\r\n        {props.children}\r\n      </CartContext.Provider>\r\n    );\r\n  };\r\n  \r\n  export default CreateProvider;\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}